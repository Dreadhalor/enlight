var Ue=Object.defineProperty;var Ne=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ne=(e,t,n)=>(Ne(e,typeof t!="symbol"?t+"":t,n),n);const qe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};qe();function Ae(e,t,n){let i=function(r){let s=[];return r.forEach(function(a){s.push(a.a,a.b)}),s}(n),l=Ge(i),o=He(l,e,t);return De(o,n,e,t)}function Ge(e){const t=new Set;return e.filter(function(n){const i=n.x+","+n.y;return t.size!==t.add(i).size})}function He(e,t,n){const i=[];for(let l of e){let o=Math.atan2(l.y-n,l.x-t);l.angle=o,i.push(o-1e-5,o,o+1e-5)}return i}function De(e,t,n,i){let l=[];for(let o=0;o<e.length;o++){let r=e[o],s=Math.cos(r),a=Math.sin(r),c={a:{x:n,y:i},b:{x:n+s,y:i+a}},u=null;for(let h=0;h<t.length;h++){let m=je(c,t[h]);!m||(!u||m.param<u.param)&&(u=m)}!u||(u.angle=r,l.push(u))}return l=l.sort(function(o,r){return o.angle-r.angle}),l}function je(e,t){let n=e.a.x,i=e.a.y,l=e.b.x-e.a.x,o=e.b.y-e.a.y,r=t.a.x,s=t.a.y,a=t.b.x-t.a.x,c=t.b.y-t.a.y,u=Math.sqrt(l*l+o*o),h=Math.sqrt(a*a+c*c);if(l/u==a/h&&o/u==c/h)return null;let m=(l*(s-i)+o*(n-r))/(a*o-c*l),f=(r+a*m-n)/l;return f<0||m<0||m>1?null:{x:n+l*f,y:i+o*f,param:f}}function Ee(e,t,n){t.fillStyle=n,t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++){let l=e[i];t.lineTo(l.x,l.y)}t.fill()}function ze(e,t,n){let i=n.createRadialGradient(t.x,t.y,0,t.x,t.y,e);return i.addColorStop(0,"#aaa"),i.addColorStop(1,"black"),i}function Ke(e,t,n,i){let l=i.createRadialGradient(t.x,t.y,0,t.x,t.y,e);return l.addColorStop(0,`rgba(255,255,255,${2/n})`),l.addColorStop(1,"rgba(255,255,255,0)"),l}function Ve(e,t,n,i,l,o){let r=[];for(let s=0;s<Math.PI*2;s+=Math.PI*2/n){let a=Math.cos(s)*i,c=Math.sin(s)*i;r.push(Ae(e.x+a,e.y+c,t))}for(let s of r)Ee(s,l,o)}function $e(e,t,n){n.fillStyle="#ffffff",n.beginPath(),n.arc(e.x,e.y,t,0,2*Math.PI,!1),n.fill()}function Ye(e,t,n,i){let l=Ae(e.x,e.y,t);Ee(l,n,i)}function Xe(e,t,n,i,l){l.fillStyle="#dd3838";for(let o of e){l.beginPath();let r=o!==t?n:i;l.arc(o.x,o.y,r,0,2*Math.PI),l.fill()}}const d=document.querySelector("#canvas"),p=d.getContext("2d"),$=document.createElement("canvas"),Qe=$.getContext("2d"),oe=document.querySelector("#cursor_canvas"),Je=oe.getContext("2d"),B=10,we=10,Ze=4,et=10;function tt(e,t,n,i,l,o,r,s,a){if(d.width=document.body.offsetWidth,d.height=document.body.offsetHeight,$.width=d.width,$.height=d.height,oe.width=d.width,oe.height=d.height,it(e,o,Qe),d.style.backgroundImage=`url(${$.toDataURL()})`,p.clearRect(0,0,d.width,d.height),n){const c=Math.max(d.width,d.height);Ve(n,t,we,B,p,Ke(c,n,we,p)),Ye(n,t,p,ze(c,n,p)),e===M.MouseoverMe&&(p.globalCompositeOperation="source-atop",p.font=o,p.fillStyle="black",p.textAlign="center",p.textBaseline="middle",p.fillText("Double click me!",d.width/2,d.height/2-120),p.globalCompositeOperation="source-over"),(e===M.ExploreMe||e===M.FreePlay)&&nt(s,r,a,p),$e(n,B+1,Je)}Xe(i,l,Ze,et,p)}function nt(e,t,n,i){i.globalCompositeOperation="source-atop",i.drawImage(t,e.x-n/2,e.y-n/2,n,n),i.globalCompositeOperation="source-over"}function it(e,t,n){if(e===M.MouseoverMe||e===M.ExploreMe){n.font=t,n.fillStyle="white",n.textAlign="center",n.textBaseline="middle";let i=e===M.MouseoverMe?"Mouse over me!":"Explore me!";n.fillText(i,d.width/2,d.height/2+(e===M.ExploreMe?120:0))}}function lt(e){let t=ot(e);return rt(t)}function ot(e){const t=[];for(let n=0;n<e.length;n++)for(let i=0;i<e.length;i++)if(n!=i){const l=st(e[n],e[i]);t.push(...l)}return t}function rt(e){return e.filter(function(n,i,l){return l.findIndex(function(o){return o.a.x==n.a.x&&o.a.y==n.a.y&&o.b.x==n.b.x&&o.b.y==n.b.y})==i})}function st(e,t){let n=e.a,i=e.b,l=t.a,o=t.b,r=at(n,i,l,o);if(r){let s=[{a:n,b:r},{a:r,b:i},{a:l,b:r},{a:r,b:o}];for(let a=s.length-1;a>-1;a--)s[a].a.x===s[a].b.x&&s[a].a.y===s[a].b.y&&s.splice(a,1);return s}else return[e,t]}function at(e,t,n,i){let l=e.x,o=e.y,r=t.x,s=t.y,a=n.x,c=n.y,u=i.x,h=i.y,m=(l-r)*(c-h)-(o-s)*(a-u);if(m==0)return null;let f=((l-a)*(c-h)-(o-c)*(a-u))/m,y=-((l-r)*(o-c)-(o-s)*(l-a))/m;return f>=0&&f<=1&&y>=0&&y<=1?{x:l+f*(r-l),y:o+f*(s-o)}:null}function Te(e,t){let n=!1,i=e.getPoints();for(let l=0,o=i.length-1;l<i.length;o=l++){let r=i[l].x,s=i[l].y,a=i[o].x,c=i[o].y;s>t.y!=c>t.y&&t.x<(a-r)*(t.y-s)/(c-s)+r&&(n=!n)}return n}function ct(e,t,n){return!e||!t?!1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<n}function ke(e){let t=e.getPoints(),n=0;for(let i=0;i<t.length;i++){let l=(i+1)%t.length;n+=t[i].x*t[l].y,n-=t[i].y*t[l].x}return n/=2,n}class Me{constructor(t){ne(this,"points");ne(this,"anchors",[]);this.points=t}getPoints(){return this.points}getPointsCoords(){return this.points.map(t=>({x:t.x,y:t.y}))}getSegments(){const t=[];for(let n=0;n<this.points.length;n++){let i=this.points[n],l=this.points[(n+1)%this.points.length];t.push({a:i,b:l})}return t}click(){this.points.forEach(t=>{this.anchors.push({x:t.x,y:t.y})})}unclick(){this.anchors=[]}move(t,n){this.anchors.length!==0&&this.points.forEach((i,l)=>{i.x=this.anchors[l].x+t,i.y=this.anchors[l].y+n})}getPoint(t,n){var i;return(i=this.points.find(l=>l.x===t&&l.y===n))!=null?i:null}}function X(e,t,n){return new Me([{x:e.x-t/2,y:e.y-n/2},{x:e.x+t/2,y:e.y-n/2},{x:e.x+t/2,y:e.y+n/2},{x:e.x-t/2,y:e.y+n/2}])}function ut(e){const t=Math.min(document.body.offsetWidth,document.body.offsetHeight),n=3,i=5,l=Math.min(50,t/12),o=l*2,r=[],s=Math.floor(Math.random()*(i-n+1))+n;for(let c=0;c<s;c++){const u=Math.PI*2/s*c,h=Math.random()*(o-l+1)+l;r.push({x:Math.cos(u)*h,y:Math.sin(u)*h})}let a={x:0,y:0};for(let c=0;c<r.length;c++)a.x+=r[c].x,a.y+=r[c].y;a.x/=r.length,a.y/=r.length;for(let c=0;c<r.length;c++)r[c].x+=e.x-a.x,r[c].y+=e.y-a.y;return new Me(r)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function re(e,t,n){return t&&Pe(e.prototype,t),n&&Pe(e,n),e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),i.forEach(function(l){F(e,l,n[l])})}return e}var ie={maxWidth:"none",display:"inline-block",position:"absolute",height:"100%",width:"100%",overflow:"scroll",fontSize:"16px"},dt={display:"inline-block",height:"200%",width:"200%",fontSize:"16px",maxWidth:"none"},ht={maxWidth:"none",minWidth:"20px",minHeight:"20px",display:"inline-block",overflow:"hidden",position:"absolute",width:"auto",margin:"0",padding:"0",top:"-999px",whiteSpace:"nowrap",fontSynthesis:"none"},Y=function(){function e(t){Ce(this,e),this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.lastOffsetWidth=-1,Object.assign(this.collapsible.style,ie),Object.assign(this.expandable.style,ie),Object.assign(this.expandableInner.style,ie),Object.assign(this.collapsibleInner.style,dt),this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return re(e,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(n){Object.assign(this.element.style,ft({},ht,{font:n}))}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:function(n){this.element.style.width=n+"px"}},{key:"reset",value:function(){var n=this.getWidth(),i=n+100;return this.expandableInner.style.width=i+"px",this.expandable.scrollLeft=i,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==n?(this.lastOffsetWidth=n,!0):!1}},{key:"onScroll",value:function(n){this.reset()&&this.element.parentNode!==null&&n(this.lastOffsetWidth)}},{key:"onResize",value:function(n){var i=this;function l(){i.onScroll(n)}this.collapsible.addEventListener("scroll",l),this.expandable.addEventListener("scroll",l),this.reset()}}]),e}();function yt(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",t),e())})}var L=function(){re(e,null,[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(e.HAS_WEBKIT_FALLBACK_BUG===null){var n=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_WEBKIT_FALLBACK_BUG=!!n&&(parseInt(n[1],10)<536||parseInt(n[1],10)===536&&parseInt(n[2],10)<=11)}return e.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(e.HAS_SAFARI_10_BUG===null)if(e.supportsNativeFontLoading()&&/Apple/.test(e.getNavigatorVendor())){var n=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_SAFARI_10_BUG=!!n&&parseInt(n[1],10)<603}else e.HAS_SAFARI_10_BUG=!1;return e.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return e.SUPPORTS_NATIVE_FONT_LOADING===null&&(e.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),e.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportStretch",value:function(){if(e.SUPPORTS_STRETCH===null){var n=document.createElement("div");try{n.style.font="condensed 100px sans-serif"}catch{}e.SUPPORTS_STRETCH=n.style.font!==""}return e.SUPPORTS_STRETCH}}]);function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ce(this,e),this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal",this}return re(e,[{key:"load",value:function(n,i){var l=this,o=n||"BESbswy",r=0,s=i||e.DEFAULT_TIMEOUT,a=l.getTime();return new Promise(function(c,u){if(e.supportsNativeFontLoading()&&!e.hasSafari10Bug()){var h=new Promise(function(f,y){var E=function v(){var S=l.getTime();S-a>=s?y(new Error(""+s+"ms timeout exceeded")):document.fonts.load(l.getStyle('"'+l.family+'"'),o).then(function(w){w.length>=1?f():setTimeout(v,25)},y)};E()}),m=new Promise(function(f,y){r=setTimeout(function(){y(new Error(""+s+"ms timeout exceeded"))},s)});Promise.race([m,h]).then(function(){clearTimeout(r),c(l)},u)}else yt(function(){var f=new Y(o),y=new Y(o),E=new Y(o),v=-1,S=-1,w=-1,j=-1,z=-1,K=-1,T=document.createElement("div");function _e(){T.parentNode!==null&&T.parentNode.removeChild(T)}function V(){if((v!=-1&&S!=-1||v!=-1&&w!=-1||S!=-1&&w!=-1)&&(v==S||v==w||S==w)){if(e.hasWebKitFallbackBug()&&(v==j&&S==j&&w==j||v==z&&S==z&&w==z||v==K&&S==K&&w==K))return;_e(),clearTimeout(r),c(l)}}T.dir="ltr",f.setFont(l.getStyle("sans-serif")),y.setFont(l.getStyle("serif")),E.setFont(l.getStyle("monospace")),T.appendChild(f.getElement()),T.appendChild(y.getElement()),T.appendChild(E.getElement()),document.body.appendChild(T),j=f.getWidth(),z=y.getWidth(),K=E.getWidth();function ve(){var C=l.getTime();if(C-a>=s)_e(),u(new Error(""+s+"ms timeout exceeded"));else{var Se=document.hidden;(Se===!0||Se===void 0)&&(v=f.getWidth(),S=y.getWidth(),w=E.getWidth(),V()),r=setTimeout(ve,50)}}ve(),f.onResize(function(C){v=C,V()}),f.setFont(l.getStyle('"'+l.family+'",sans-serif')),y.onResize(function(C){S=C,V()}),y.setFont(l.getStyle('"'+l.family+'",serif')),E.onResize(function(C){w=C,V()}),E.setFont(l.getStyle('"'+l.family+'",monospace'))})})}},{key:"getStyle",value:function(n){return[this.style,this.weight,e.supportStretch()?this.stretch:"","100px",n].join(" ")}},{key:"getTime",value:function(){return new Date().getTime()}}]),e}();F(L,"Ruler",Y);F(L,"HAS_WEBKIT_FALLBACK_BUG",null);F(L,"HAS_SAFARI_10_BUG",null);F(L,"SUPPORTS_STRETCH",null);F(L,"SUPPORTS_NATIVE_FONT_LOADING",null);F(L,"DEFAULT_TIMEOUT",3e3);const I=36,J=new URL("/enlight/AiFillQuestionCircle.svg",self.location).href,Ie=new URL("/enlight/AiFillQuestionCircleMouseover.svg",self.location).href;let q={x:0,y:0};const pt=new Image;pt.src=J;const gt=new Image;gt.src=Ie;const D=new Image;D.src=J;var M=(e=>(e[e.MouseoverMe=0]="MouseoverMe",e[e.ExploreMe=1]="ExploreMe",e[e.FreePlay=2]="FreePlay",e))(M||{});const k=document.querySelector("#canvas");k.width=document.body.offsetWidth;k.height=document.body.offsetHeight;const ae=document.createElement("canvas"),ce=ae.getContext("2d"),H=11;ae.width=H*2;ae.height=H*2;ce.fillStyle="#fff";ce.arc(H,H,H,0,2*Math.PI);ce.fill();const Z=document.querySelector("#overlay"),se=document.querySelector("#info");let W=!1;const _=document.querySelector("#qmark");_.onclick=()=>{W=se.style.display==="none"};_.onpointerover=()=>{D.src=Ie};_.onpointerup=()=>{D.src=J};_.onpointerleave=()=>{D.src=J};const Oe="Annie Use Your Telescope",mt="60px";let R=1,O=null,x=null,G=null,ee=!1,ue=!1;const xt=500,fe=15,bt=20;let U=!0,P=!0,Fe=[];const Q=2,Le=e=>{for(;e.pop(););let t=k.width,n=k.height,i={x:t/2,y:n/2};e.push(X(i,t+Q,n+Q),X(i,t+B*4,n+B*4)),P=!0};let le={width:0,height:0};const Re=()=>{let e=k.width,t=k.height;(le.width!==e||le.height!==t)&&(P=!0),le={width:e,height:t}},_t=()=>{Re();let e=k.width,t=k.height,n={x:e/2,y:t/2};return[X(n,e+Q,t+Q),X(n,e+B*4,t+B*4)]};Le(Fe);const A=[];let b=[],g=null,de=[];function he(e,t,n){let i=e;return i=i.concat(n),t.forEach(l=>{g||b.includes(l),i=i.concat(l.getSegments())}),i=lt(i),i}function ye(){return _t().map(e=>e.getSegments()).flat(1)}function vt(e){let t=We(e,A);t.length>1&&(t=t.sort((n,i)=>ke(n)-ke(i)),t=t.slice(0,1)),b=t}function We(e,t=[]){return t.filter(n=>Te(n,{x:e.clientX,y:e.clientY}))}let pe=he(ye(),A,de),ge=[];function Be(){switch(Re(),P&&(console.log("updateMove"),te(),P=!1),W?_.style.pointerEvents="none":_.style.pointerEvents="auto",se.style.display!=="none"&&!W&&R===1&&(R=2),se.style.display=W?"flex":"none",R){case 1:q={x:k.width/2,y:k.height/2},_.style.display="block";break;case 2:q={x:k.width-I/2-10,y:I/2+10},_.style.display="block";break;default:_.style.display="none";break}_.style.left=`${q.x-I/2}px`,_.style.top=`${q.y-I/2}px`;let e=_.getBoundingClientRect();(U||P)&&(tt(R,pe,O,ge,g,`${mt} ${Oe}`,D,{x:e.left+I/2,y:e.top+I/2},I),U=!0),requestAnimationFrame(Be)}window.onload=function(){new L(Oe).load().then(()=>{document.body.style.opacity="1",Be()})};function me(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}function St(e){return!!(x&&!ee&&me(x,e)<fe)}function wt(e){return!!(!ue&&!ee&&G&&G.timeStamp&&e.timeStamp-G.timeStamp<xt&&me(G,e)<fe)}function kt(e){W&&(W=!1),ue=!1,G={x:e.clientX,y:e.clientY,timeStamp:e.timeStamp},g||vt(e),N()}function Pt(e){ue=!0;let t=!1;for(let n of We(e,A)){let i=A.indexOf(n),l=b.indexOf(n);i>-1&&l>-1&&(A.splice(i,1),t=!0)}if(t)b=[];else{let n=ut({x:e.clientX,y:e.clientY});A.push(n),R===0&&(R=1)}te(),g=null,N()}function xe(e){e?(O={x:e.clientX,y:e.clientY},x&&me(x,O)>fe&&(ee=!0)):O=null}function be(e){e?x={x:e.clientX,y:e.clientY,timeStamp:e.timeStamp}:x=null,ee=!1}function N(){ge=b.map(e=>e.getPoints()).flat(1),U=!0}function At(){return!O||!x?[0,0]:[O.x-(x==null?void 0:x.x),O.y-x.y]}te();function te(){pe=he(ye(),A,de)}window.onresize=()=>{Le(Fe),te()};const Et=e=>{if(x&&b.length>0&&(P=!0),P){if(g){for(let t of b){let n=t.getPoint(g.x,g.y);if(n){n.x=e.clientX,n.y=e.clientY,g=n;break}}N()}else for(let t of b)P||(P=!0),t.move(...At());pe=he(ye(),A,de),N()}xe(e),U=!0};Z.onpointermove=Et;const Tt=e=>{q={x:e.clientX,y:e.clientY},be(e);let t=!1;for(let n of ge)if(ct(n,x,bt)){t=!0,g=n;break}if(t||(g=null),!g){let n=!1;for(let i of b)if(Te(i,{x:e.clientX,y:e.clientY})){n=!0;break}if(!n)b=[];else for(let i of b)i.click()}N(),xe(e),U=!0};Z.onpointerdown=Tt;const Mt=e=>{if(!g)for(let i of b)i.unclick();let t=St(e);wt(e)?Pt(e):t&&kt(e),g=null,be(null),U=!0};Z.onpointerup=Mt;const Ct=()=>{be(null),xe(null);for(let e of b)e.unclick();g=null,N()};Z.onmouseleave=Ct;window.exportPolygons=function(){let e=A.map(t=>t.getPointsCoords());console.log(e)};
