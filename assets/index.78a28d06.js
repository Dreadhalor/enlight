var Z=Object.defineProperty;var j=(t,e,n)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var z=(t,e,n)=>(j(t,typeof e!="symbol"?e+"":e,n),n);const tt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}};tt();function W(t,e,n){var i=function(o){var u=[];return o.forEach(function(a){u.push(a.a,a.b)}),u}(n);let r=et(i),l=nt(r,t,e);return it(l,n,t,e)}function et(t){const e=new Set;return t.filter(function(n){const i=n.x+","+n.y;return e.size!==e.add(i).size})}function nt(t,e,n){const i=[];for(let r of t){let l=Math.atan2(r.y-n,r.x-e);r.angle=l,i.push(l-1e-5,l,l+1e-5)}return i}function it(t,e,n,i){for(var r=[],l=0;l<t.length;l++){for(var o=t[l],u=Math.cos(o),a=Math.sin(o),s={a:{x:n,y:i},b:{x:n+u,y:i+a}},f=null,h=0;h<e.length;h++){var p=rt(s,e[h]);!p||(!f||p.param<f.param)&&(f=p)}!f||(f.angle=o,r.push(f))}return r=r.sort(function(g,q){return g.angle-q.angle}),r}function rt(t,e){var n=t.a.x,i=t.a.y,r=t.b.x-t.a.x,l=t.b.y-t.a.y,o=e.a.x,u=e.a.y,a=e.b.x-e.a.x,s=e.b.y-e.a.y,f=Math.sqrt(r*r+l*l),h=Math.sqrt(a*a+s*s);if(r/f==a/h&&l/f==s/h)return null;var p=(r*(u-i)+l*(n-o))/(a*l-s*r),g=(o+a*p-n)/r;return g<0||p<0||p>1?null:{x:n+r*g,y:i+l*g,param:g}}const m=document.querySelector("#canvas"),c=m.getContext("2d"),k=10,D=10,lt=4,ot=10;function at(t,e,n,i,r){if(m.width=window.innerWidth,m.height=window.innerHeight,c.clearRect(0,0,m.width,m.height),t===S.MouseoverMe||t===S.ExploreMe){c.font="30px Arial",c.fillStyle="white",c.textAlign="center";let l=t===S.MouseoverMe?"Mouse over me!":"Explore me!";c.fillText(l,m.width/2,m.height/2)}if(n){const l=Math.max(m.width,m.height);yt(n,e,D,c,ut(l,n,D,c)),dt(n,e,c,st(l,n,c)),t===S.MouseoverMe&&(c.globalCompositeOperation="source-atop",c.font="30px Arial",c.fillStyle="black",c.textAlign="center",c.fillText("Double click me!",m.width/2,m.height/2-150),c.globalCompositeOperation="source-over"),ct(n,k+1,c)}ft(i,r,c)}function B(t,e,n){e.fillStyle=n,e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i++){let r=t[i];e.lineTo(r.x,r.y)}e.fill()}function st(t,e,n){let i=n.createRadialGradient(e.x,e.y,0,e.x,e.y,t);return i.addColorStop(0,"#aaa"),i.addColorStop(1,"black"),i}function ut(t,e,n,i){let r=i.createRadialGradient(e.x,e.y,0,e.x,e.y,t);return r.addColorStop(0,`rgba(255,255,255,${2/n})`),r.addColorStop(1,"rgba(255,255,255,0)"),r}function ct(t,e,n){n.fillStyle="#ffffff",n.beginPath(),n.arc(t.x,t.y,e,0,2*Math.PI,!1),n.fill()}function ft(t,e,n){n.fillStyle="#dd3838";for(let i of t){n.beginPath();let r=i!==e?lt:ot;n.arc(i.x,i.y,r,0,2*Math.PI),n.fill()}}function dt(t,e,n,i){let r=W(t.x,t.y,e);B(r,n,i)}function yt(t,e,n,i,r){let l=[];for(let o=0;o<Math.PI*2;o+=Math.PI*2/n){let u=Math.cos(o)*k,a=Math.sin(o)*k;l.push(W(t.x+u,t.y+a,e))}for(let o of l)B(o,i,r)}function ht(t){let e=xt(t);return pt(e)}function xt(t){const e=[];for(var n=0;n<t.length;n++)for(var i=0;i<t.length;i++)if(n!=i){const r=gt(t[n],t[i]);e.push(...r)}return e}function pt(t){return t.filter(function(n,i,r){return r.findIndex(function(l){return l.a.x==n.a.x&&l.a.y==n.a.y&&l.b.x==n.b.x&&l.b.y==n.b.y})==i})}function gt(t,e){var n=t.a,i=t.b,r=e.a,l=e.b,o=mt(n,i,r,l);if(o){let u=[{a:n,b:o},{a:o,b:i},{a:r,b:o},{a:o,b:l}];for(let a=u.length-1;a>-1;a--)u[a].a.x===u[a].b.x&&u[a].a.y===u[a].b.y&&u.splice(a,1);return u}else return[t,e]}function mt(t,e,n,i){var r=t.x,l=t.y,o=e.x,u=e.y,a=n.x,s=n.y,f=i.x,h=i.y,p=(r-o)*(s-h)-(l-u)*(a-f);if(p==0)return null;var g=((r-a)*(s-h)-(l-s)*(a-f))/p,q=-((r-o)*(l-s)-(l-u)*(r-a))/p;return g>=0&&g<=1&&q>=0&&q<=1?{x:r+g*(o-r),y:l+g*(u-l)}:null}function K(t,e){let n=!1,i=t.getPoints();for(let r=0,l=i.length-1;r<i.length;l=r++){let o=i[r].x,u=i[r].y,a=i[l].x,s=i[l].y;u>e.y!=s>e.y&&e.x<(a-o)*(e.y-u)/(s-u)+o&&(n=!n)}return n}function bt(t,e,n){return!t||!e?!1:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<n}function H(t){let e=t.getPoints(),n=0;for(let i=0;i<e.length;i++){let r=(i+1)%e.length;n+=e[i].x*e[r].y,n-=e[i].y*e[r].x}return n/=2,n}class V{constructor(e){z(this,"points");z(this,"anchors",[]);this.points=e}getPoints(){return this.points}getPointsCoords(){return this.points.map(e=>({x:e.x,y:e.y}))}getSegments(){const e=[];for(let n=0;n<this.points.length;n++){let i=this.points[n],r=this.points[(n+1)%this.points.length];e.push({a:i,b:r})}return e}click(){this.points.forEach(e=>{this.anchors.push({x:e.x,y:e.y})})}unclick(){this.anchors=[]}move(e,n){this.anchors.length!==0&&this.points.forEach((i,r)=>{i.x=this.anchors[r].x+e,i.y=this.anchors[r].y+n})}getPoint(e,n){var i;return(i=this.points.find(r=>r.x===e&&r.y===n))!=null?i:null}}function N(t,e,n){return new V([{x:t.x-e/2,y:t.y-n/2},{x:t.x+e/2,y:t.y-n/2},{x:t.x+e/2,y:t.y+n/2},{x:t.x-e/2,y:t.y+n/2}])}function Mt(t){const e=Math.min(window.innerWidth,window.innerHeight),n=3,i=5,r=Math.min(50,e/12),l=r*2,o=[],u=Math.floor(Math.random()*(i-n+1))+n;for(let s=0;s<u;s++){const f=Math.PI*2/u*s,h=Math.random()*(l-r+1)+r;o.push({x:Math.cos(f)*h,y:Math.sin(f)*h})}let a={x:0,y:0};for(let s=0;s<o.length;s++)a.x+=o[s].x,a.y+=o[s].y;a.x/=o.length,a.y/=o.length;for(let s=0;s<o.length;s++)o[s].x+=t.x-a.x,o[s].y+=t.y-a.y;return new V(o)}var S=(t=>(t[t.MouseoverMe=0]="MouseoverMe",t[t.ExploreMe=1]="ExploreMe",t[t.FreePlay=2]="FreePlay",t))(S||{});const E=document.querySelector("#canvas");let C=0;const wt=20;let P=!0,M=!0,I=[];const J=t=>{for(;t.pop(););let e=window.innerWidth,n=window.innerHeight,i={x:e/2,y:n/2};t.push(N(i,e+2,n+2),N(i,e+k*4,n+k*4)),M=!0};J(I);const b=[];let y=[],d=null,L=[];var v=null;const vt=500,A=15;let x=null,w=null;function O(t,e,n){let i=t;return i=i.concat(n),e.forEach(r=>{d||y.includes(r),i=i.concat(r.getSegments())}),i=ht(i),i}function R(){return I.map(t=>t.getSegments()).flat(1)}function Pt(t){let e=T(t);e.length>1&&(e=e.sort((n,i)=>H(n)-H(i)),e=e.slice(0,1)),y=e}function T(t){return b.filter(e=>K(e,{x:t.clientX,y:t.clientY}))}let X=O(R(),b,L),Y=[];function Q(){requestAnimationFrame(Q),(P||M)&&(at(C,X,v,Y,d),P=!1,M=!1)}window.onload=function(){Q()};function _t(t){return!!(x&&Math.abs(t.clientX-x.x)<A&&Math.abs(t.clientY-x.y)<A)}function St(t){return!!(w&&w.timeStamp&&t.timeStamp-w.timeStamp<vt&&Math.abs(t.clientX-w.x)<A&&Math.abs(t.clientY-w.y)<A)}function kt(t){w={x:t.clientX,y:t.clientY,timeStamp:t.timeStamp},d||Pt(t),_()}E.onpointerdown=function(t){G(t);let e=!1;for(let n of Y)if(bt(n,x,wt)){e=!0,d=n;break}if(e||(d=null),!d){let n=!1;for(let i of y)if(K(i,{x:t.clientX,y:t.clientY})){n=!0;break}if(!n)y=[];else for(let i of y)i.click()}_(),F(t),P=!0};function Ct(t){let e=!1;for(let n of T(t)){let i=b.indexOf(n),r=y.indexOf(n);i>-1&&r>-1&&(b.splice(i,1),e=!0)}if(e)y=[];else{let n=Mt({x:t.clientX,y:t.clientY});b.push(n),y=[n],C===0&&(C=1)}$(),d=null,_()}function U(t){C===1&&T(t).length===0&&(C=2)}function F(t){t?(U(t),v={x:t.clientX,y:t.clientY}):v=null}function G(t){t?(U(t),x={x:t.clientX,y:t.clientY,timeStamp:t.timeStamp}):x=null}E.onpointerup=function(t){if(!d)for(let i of y)i.unclick();let e=_t(t),n=St(t);e&&kt(t),e&&n&&Ct(t),d=null,G(null),P=!0};function _(){Y=y.map(t=>t.getPoints()).flat(1),P=!0}function qt(){return!v||!x?[0,0]:[v.x-(x==null?void 0:x.x),v.y-x.y]}const At=t=>{if(x&&y.length>0&&(M=!0),M){if(d){for(let e of y){let n=e.getPoint(d.x,d.y);if(n){n.x=t.clientX,n.y=t.clientY,d=n;break}}_()}else for(let e of y)M||(M=!0),e.move(...qt());X=O(R(),b,L),_()}F(t),P=!0};$();function $(){X=O(R(),b,L)}E.onpointermove=t=>At(t);E.onmouseleave=()=>{G(null),F(null);for(let t of y)t.unclick();d=null,_()};window.onresize=()=>{J(I),$()};window.exportPolygons=function(){let t=b.map(e=>e.getPointsCoords());console.log(t)};
