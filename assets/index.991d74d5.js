var Se=Object.defineProperty;var _e=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K=(e,t,n)=>(_e(e,typeof t!="symbol"?t+"":t,n),n);const we=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}};we();function de(e,t,n){var i=function(o){var s=[];return o.forEach(function(a){s.push(a.a,a.b)}),s}(n);let l=Pe(i),r=Ae(l,e,t);return Te(r,n,e,t)}function Pe(e){const t=new Set;return e.filter(function(n){const i=n.x+","+n.y;return t.size!==t.add(i).size})}function Ae(e,t,n){const i=[];for(let l of e){let r=Math.atan2(l.y-n,l.x-t);l.angle=r,i.push(r-1e-5,r,r+1e-5)}return i}function Te(e,t,n,i){for(var l=[],r=0;r<e.length;r++){for(var o=e[r],s=Math.cos(o),a=Math.sin(o),u={a:{x:n,y:i},b:{x:n+s,y:i+a}},f=null,p=0;p<t.length;p++){var m=ke(u,t[p]);!m||(!f||m.param<f.param)&&(f=m)}!f||(f.angle=o,l.push(f))}return l=l.sort(function(c,h){return c.angle-h.angle}),l}function ke(e,t){var n=e.a.x,i=e.a.y,l=e.b.x-e.a.x,r=e.b.y-e.a.y,o=t.a.x,s=t.a.y,a=t.b.x-t.a.x,u=t.b.y-t.a.y,f=Math.sqrt(l*l+r*r),p=Math.sqrt(a*a+u*u);if(l/f==a/p&&r/f==u/p)return null;var m=(l*(s-i)+r*(n-o))/(a*r-u*l),c=(o+a*m-n)/l;return c<0||m<0||m>1?null:{x:n+l*c,y:i+r*c,param:c}}const _=document.querySelector("#canvas"),d=_.getContext("2d"),L=10,se=10,Ee=4,Me=10;function Oe(e,t,n,i,l,r){if(_.width=window.innerWidth,_.height=window.innerHeight,d.clearRect(0,0,_.width,_.height),e===I.MouseoverMe||e===I.ExploreMe){d.font=r,d.fillStyle="white",d.textAlign="center";let o=e===I.MouseoverMe?"Mouse over me!":"Explore me!";d.fillText(o,_.width/2,_.height/2)}if(n){const o=Math.max(_.width,_.height);Re(n,t,se,d,Fe(o,n,se,d)),Le(n,t,d,Ce(o,n,d)),e===I.MouseoverMe&&(d.globalCompositeOperation="source-atop",d.font=r,d.fillStyle="black",d.textAlign="center",d.fillText("Double click me!",_.width/2,_.height/2-150),d.globalCompositeOperation="source-over"),Ie(n,L+1,d)}We(i,l,d)}function he(e,t,n){t.fillStyle=n,t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++){let l=e[i];t.lineTo(l.x,l.y)}t.fill()}function Ce(e,t,n){let i=n.createRadialGradient(t.x,t.y,0,t.x,t.y,e);return i.addColorStop(0,"#aaa"),i.addColorStop(1,"black"),i}function Fe(e,t,n,i){let l=i.createRadialGradient(t.x,t.y,0,t.x,t.y,e);return l.addColorStop(0,`rgba(255,255,255,${2/n})`),l.addColorStop(1,"rgba(255,255,255,0)"),l}function Ie(e,t,n){n.fillStyle="#ffffff",n.beginPath(),n.arc(e.x,e.y,t,0,2*Math.PI,!1),n.fill()}function We(e,t,n){n.fillStyle="#dd3838";for(let i of e){n.beginPath();let l=i!==t?Ee:Me;n.arc(i.x,i.y,l,0,2*Math.PI),n.fill()}}function Le(e,t,n,i){let l=de(e.x,e.y,t);he(l,n,i)}function Re(e,t,n,i,l){let r=[];for(let o=0;o<Math.PI*2;o+=Math.PI*2/n){let s=Math.cos(o)*L,a=Math.sin(o)*L;r.push(de(e.x+s,e.y+a,t))}for(let o of r)he(o,i,l)}function Be(e){let t=Ne(e);return Ue(t)}function Ne(e){const t=[];for(var n=0;n<e.length;n++)for(var i=0;i<e.length;i++)if(n!=i){const l=ze(e[n],e[i]);t.push(...l)}return t}function Ue(e){return e.filter(function(n,i,l){return l.findIndex(function(r){return r.a.x==n.a.x&&r.a.y==n.a.y&&r.b.x==n.b.x&&r.b.y==n.b.y})==i})}function ze(e,t){var n=e.a,i=e.b,l=t.a,r=t.b,o=Ge(n,i,l,r);if(o){let s=[{a:n,b:o},{a:o,b:i},{a:l,b:o},{a:o,b:r}];for(let a=s.length-1;a>-1;a--)s[a].a.x===s[a].b.x&&s[a].a.y===s[a].b.y&&s.splice(a,1);return s}else return[e,t]}function Ge(e,t,n,i){var l=e.x,r=e.y,o=t.x,s=t.y,a=n.x,u=n.y,f=i.x,p=i.y,m=(l-o)*(u-p)-(r-s)*(a-f);if(m==0)return null;var c=((l-a)*(u-p)-(r-u)*(a-f))/m,h=-((l-o)*(r-u)-(r-s)*(l-a))/m;return c>=0&&c<=1&&h>=0&&h<=1?{x:l+c*(o-l),y:r+c*(s-r)}:null}function pe(e,t){let n=!1,i=e.getPoints();for(let l=0,r=i.length-1;l<i.length;r=l++){let o=i[l].x,s=i[l].y,a=i[r].x,u=i[r].y;s>t.y!=u>t.y&&t.x<(a-o)*(t.y-s)/(u-s)+o&&(n=!n)}return n}function He(e,t,n){return!e||!t?!1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<n}function ue(e){let t=e.getPoints(),n=0;for(let i=0;i<t.length;i++){let l=(i+1)%t.length;n+=t[i].x*t[l].y,n-=t[i].y*t[l].x}return n/=2,n}class ye{constructor(t){K(this,"points");K(this,"anchors",[]);this.points=t}getPoints(){return this.points}getPointsCoords(){return this.points.map(t=>({x:t.x,y:t.y}))}getSegments(){const t=[];for(let n=0;n<this.points.length;n++){let i=this.points[n],l=this.points[(n+1)%this.points.length];t.push({a:i,b:l})}return t}click(){this.points.forEach(t=>{this.anchors.push({x:t.x,y:t.y})})}unclick(){this.anchors=[]}move(t,n){this.anchors.length!==0&&this.points.forEach((i,l)=>{i.x=this.anchors[l].x+t,i.y=this.anchors[l].y+n})}getPoint(t,n){var i;return(i=this.points.find(l=>l.x===t&&l.y===n))!=null?i:null}}function ce(e,t,n){return new ye([{x:e.x-t/2,y:e.y-n/2},{x:e.x+t/2,y:e.y-n/2},{x:e.x+t/2,y:e.y+n/2},{x:e.x-t/2,y:e.y+n/2}])}function De(e){const t=Math.min(window.innerWidth,window.innerHeight),n=3,i=5,l=Math.min(50,t/12),r=l*2,o=[],s=Math.floor(Math.random()*(i-n+1))+n;for(let u=0;u<s;u++){const f=Math.PI*2/s*u,p=Math.random()*(r-l+1)+l;o.push({x:Math.cos(f)*p,y:Math.sin(f)*p})}let a={x:0,y:0};for(let u=0;u<o.length;u++)a.x+=o[u].x,a.y+=o[u].y;a.x/=o.length,a.y/=o.length;for(let u=0;u<o.length;u++)o[u].x+=e.x-a.x,o[u].y+=e.y-a.y;return new ye(o)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function V(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),i.forEach(function(l){M(e,l,n[l])})}return e}var q={maxWidth:"none",display:"inline-block",position:"absolute",height:"100%",width:"100%",overflow:"scroll",fontSize:"16px"},qe={display:"inline-block",height:"200%",width:"200%",fontSize:"16px",maxWidth:"none"},Ve={maxWidth:"none",minWidth:"20px",minHeight:"20px",display:"inline-block",overflow:"hidden",position:"absolute",width:"auto",margin:"0",padding:"0",top:"-999px",whiteSpace:"nowrap",fontSynthesis:"none"},G=function(){function e(t){ge(this,e),this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.lastOffsetWidth=-1,Object.assign(this.collapsible.style,q),Object.assign(this.expandable.style,q),Object.assign(this.expandableInner.style,q),Object.assign(this.collapsibleInner.style,qe),this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}return V(e,[{key:"getElement",value:function(){return this.element}},{key:"setFont",value:function(n){Object.assign(this.element.style,Ke({},Ve,{font:n}))}},{key:"getWidth",value:function(){return this.element.offsetWidth}},{key:"setWidth",value:function(n){this.element.style.width=n+"px"}},{key:"reset",value:function(){var n=this.getWidth(),i=n+100;return this.expandableInner.style.width=i+"px",this.expandable.scrollLeft=i,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==n?(this.lastOffsetWidth=n,!0):!1}},{key:"onScroll",value:function(n){this.reset()&&this.element.parentNode!==null&&n(this.lastOffsetWidth)}},{key:"onResize",value:function(n){var i=this;function l(){i.onScroll(n)}this.collapsible.addEventListener("scroll",l),this.expandable.addEventListener("scroll",l),this.reset()}}]),e}();function je(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",t),e())})}var O=function(){V(e,null,[{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getNavigatorVendor",value:function(){return window.navigator.vendor}},{key:"hasWebKitFallbackBug",value:function(){if(e.HAS_WEBKIT_FALLBACK_BUG===null){var n=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_WEBKIT_FALLBACK_BUG=!!n&&(parseInt(n[1],10)<536||parseInt(n[1],10)===536&&parseInt(n[2],10)<=11)}return e.HAS_WEBKIT_FALLBACK_BUG}},{key:"hasSafari10Bug",value:function(){if(e.HAS_SAFARI_10_BUG===null)if(e.supportsNativeFontLoading()&&/Apple/.test(e.getNavigatorVendor())){var n=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(e.getUserAgent());e.HAS_SAFARI_10_BUG=!!n&&parseInt(n[1],10)<603}else e.HAS_SAFARI_10_BUG=!1;return e.HAS_SAFARI_10_BUG}},{key:"supportsNativeFontLoading",value:function(){return e.SUPPORTS_NATIVE_FONT_LOADING===null&&(e.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),e.SUPPORTS_NATIVE_FONT_LOADING}},{key:"supportStretch",value:function(){if(e.SUPPORTS_STRETCH===null){var n=document.createElement("div");try{n.style.font="condensed 100px sans-serif"}catch{}e.SUPPORTS_STRETCH=n.style.font!==""}return e.SUPPORTS_STRETCH}}]);function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ge(this,e),this.family=t,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal",this}return V(e,[{key:"load",value:function(n,i){var l=this,r=n||"BESbswy",o=0,s=i||e.DEFAULT_TIMEOUT,a=l.getTime();return new Promise(function(u,f){if(e.supportsNativeFontLoading()&&!e.hasSafari10Bug()){var p=new Promise(function(c,h){var w=function v(){var b=l.getTime();b-a>=s?h(new Error(""+s+"ms timeout exceeded")):document.fonts.load(l.getStyle('"'+l.family+'"'),r).then(function(S){S.length>=1?c():setTimeout(v,25)},h)};w()}),m=new Promise(function(c,h){o=setTimeout(function(){h(new Error(""+s+"ms timeout exceeded"))},s)});Promise.race([m,p]).then(function(){clearTimeout(o),u(l)},f)}else je(function(){var c=new G(r),h=new G(r),w=new G(r),v=-1,b=-1,S=-1,B=-1,N=-1,U=-1,P=document.createElement("div");function re(){P.parentNode!==null&&P.parentNode.removeChild(P)}function z(){if((v!=-1&&b!=-1||v!=-1&&S!=-1||b!=-1&&S!=-1)&&(v==b||v==S||b==S)){if(e.hasWebKitFallbackBug()&&(v==B&&b==B&&S==B||v==N&&b==N&&S==N||v==U&&b==U&&S==U))return;re(),clearTimeout(o),u(l)}}P.dir="ltr",c.setFont(l.getStyle("sans-serif")),h.setFont(l.getStyle("serif")),w.setFont(l.getStyle("monospace")),P.appendChild(c.getElement()),P.appendChild(h.getElement()),P.appendChild(w.getElement()),document.body.appendChild(P),B=c.getWidth(),N=h.getWidth(),U=w.getWidth();function oe(){var T=l.getTime();if(T-a>=s)re(),f(new Error(""+s+"ms timeout exceeded"));else{var ae=document.hidden;(ae===!0||ae===void 0)&&(v=c.getWidth(),b=h.getWidth(),S=w.getWidth(),z()),o=setTimeout(oe,50)}}oe(),c.onResize(function(T){v=T,z()}),c.setFont(l.getStyle('"'+l.family+'",sans-serif')),h.onResize(function(T){b=T,z()}),h.setFont(l.getStyle('"'+l.family+'",serif')),w.onResize(function(T){S=T,z()}),w.setFont(l.getStyle('"'+l.family+'",monospace'))})})}},{key:"getStyle",value:function(n){return[this.style,this.weight,e.supportStretch()?this.stretch:"","100px",n].join(" ")}},{key:"getTime",value:function(){return new Date().getTime()}}]),e}();M(O,"Ruler",G);M(O,"HAS_WEBKIT_FALLBACK_BUG",null);M(O,"HAS_SAFARI_10_BUG",null);M(O,"SUPPORTS_STRETCH",null);M(O,"SUPPORTS_NATIVE_FONT_LOADING",null);M(O,"DEFAULT_TIMEOUT",3e3);var I=(e=>(e[e.MouseoverMe=0]="MouseoverMe",e[e.ExploreMe=1]="ExploreMe",e[e.FreePlay=2]="FreePlay",e))(I||{});const H=document.querySelector("#canvas"),me="Annie Use Your Telescope",Ye="60px";let R=0;var E=null;let x=null,W=null,D=!1;const $e=500,j=15,Xe=20;let C=!0,k=!0,Y=[];const xe=e=>{for(;e.pop(););let t=window.innerWidth,n=window.innerHeight,i={x:t/2,y:n/2};e.push(ce(i,t+2,n+2),ce(i,t+L*4,n+L*4)),k=!0};xe(Y);const A=[];let g=[],y=null,$=[];function X(e,t,n){let i=e;return i=i.concat(n),t.forEach(l=>{y||g.includes(l),i=i.concat(l.getSegments())}),i=Be(i),i}function J(){return Y.map(e=>e.getSegments()).flat(1)}function Je(e){let t=Q(e);t.length>1&&(t=t.sort((n,i)=>ue(n)-ue(i)),t=t.slice(0,1)),g=t}function Q(e){return A.filter(t=>pe(t,{x:e.clientX,y:e.clientY}))}let Z=X(J(),A,$),ee=[];function ve(){(C||k)&&(Oe(R,Z,E,ee,y,`${Ye} ${me}`),C=!1,k=!1),requestAnimationFrame(ve)}window.onload=function(){new O(me).load().then(()=>ve())};function te(e,t){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))}function Qe(e){return!!(x&&!D&&te(x,e)<j)}function Ze(e){return!!(!D&&W&&W.timeStamp&&e.timeStamp-W.timeStamp<$e&&te(W,e)<j)}function et(e){W={x:e.clientX,y:e.clientY,timeStamp:e.timeStamp},y||Je(e),F()}H.onpointerdown=function(e){ie(e);let t=!1;for(let n of ee)if(He(n,x,Xe)){t=!0,y=n;break}if(t||(y=null),!y){let n=!1;for(let i of g)if(pe(i,{x:e.clientX,y:e.clientY})){n=!0;break}if(!n)g=[];else for(let i of g)i.click()}F(),ne(e),C=!0};function tt(e){let t=!1;for(let n of Q(e)){let i=A.indexOf(n),l=g.indexOf(n);i>-1&&l>-1&&(A.splice(i,1),t=!0)}if(t)g=[];else{let n=De({x:e.clientX,y:e.clientY});A.push(n),g=[n],R===0&&(R=1)}le(),y=null,F()}function be(e){R===1&&Q(e).length===0&&(R=2)}function ne(e){e?(be(e),E={x:e.clientX,y:e.clientY},x&&te(x,E)>j&&(D=!0)):E=null}function ie(e){e?(be(e),x={x:e.clientX,y:e.clientY,timeStamp:e.timeStamp}):x=null,D=!1}H.onpointerup=function(e){if(!y)for(let i of g)i.unclick();let t=Qe(e),n=Ze(e);t&&et(e),t&&n&&tt(e),y=null,ie(null),C=!0};function F(){ee=g.map(e=>e.getPoints()).flat(1),C=!0}function nt(){return!E||!x?[0,0]:[E.x-(x==null?void 0:x.x),E.y-x.y]}const it=e=>{if(x&&g.length>0&&(k=!0),k){if(y){for(let t of g){let n=t.getPoint(y.x,y.y);if(n){n.x=e.clientX,n.y=e.clientY,y=n;break}}F()}else for(let t of g)k||(k=!0),t.move(...nt());Z=X(J(),A,$),F()}ne(e),C=!0};le();function le(){Z=X(J(),A,$)}H.onpointermove=e=>it(e);H.onmouseleave=()=>{ie(null),ne(null);for(let e of g)e.unclick();y=null,F()};window.onresize=()=>{xe(Y),le()};window.exportPolygons=function(){let e=A.map(t=>t.getPointsCoords());console.log(e)};
